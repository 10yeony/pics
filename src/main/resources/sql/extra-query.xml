<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="ExtraMapper">
	
	<!-- Bookmark -->
	<insert id="addBookmark" parameterType="bookmark">
		INSERT INTO bookmark (stu_id,cust_id) 
		VALUES (#{studio.stuId},#{customer.custId})
	</insert>
	
	<!-- 고객 아이디로 찾기 -->
	<select id="getBookmark" parameterType="int" resultType="studio">
		SELECT s.stu_id, s.category_id, s.name, s.description, s.rule
			   ,s.main_img,s.port_img,s.cad_img,s.floor 
		FROM studio s,customer c,bookmark b
		WHERE c.cust_id = #{value}
		  AND b.cust_id = c.cust_id
		  AND s.stu_id = b.stu_id
	</select>
	
	<!-- 고객 아이디와 스튜디오 아이디로 찾기 -->
	<select id="getBookId" parameterType="hashmap" resultType="bookmark">
		SELECT book_id, stu_id, cust_id
		FROM bookmark
		WHERE cust_id = #{custId}
		AND stu_id = #{stuId}
	</select>
	
	<delete id="deleteBookmark" parameterType="int">
		DELETE FROM bookmark
		WHERE book_id = #{value}
	</delete>
	
	<!-- Review -->
	<insert id="writeReview" parameterType="review">
		INSERT INTO review(cust_id,stu_id,score,content,img,reg_date) 
		VALUES (#{customer.custId},#{studio.stuId},#{score},#{content},#{img},#{regDate})
	</insert>
	
	<!--getCustomer Review -->
	<select id="getCustomerReivews" parameterType="int" resultType="review">
		SELECT review_id,cust_id,stu_id,score,content,img,reg_date,answer
		FROM review
		WHERE cust_id = #{value}
	</select>
	
</mapper>